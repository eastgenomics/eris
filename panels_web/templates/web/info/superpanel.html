{% extends "base.html" %}

{% block content %}
<div class="container mb-5 pb-5">
    <!-- Panel Overview -->
    <div class="row text-wrap text-break">
        <div class="col">
            {% if superpanel %}
            <h1>{{ superpanel.panel_name }}</h1>
            <h4><span class="badge text-bg-info text-white">SuperPanel</span></h4>
            {% if superpanel.external_id %}
            <h4>external panelapp id: {{ superpanel.external_id }}</h4>
            {% else %}
            <h4>external panelapp id: None</h4>
            {% endif %}
            <h4>source: {{ superpanel.panel_source }}</h4>
            {% if superpanel.test_directory %}
            <h4>test directory: <span class="badge text-bg-success">{{superpanel.test_directory}}</span></h4>
            {% else %}
            <h4>test directory: <span class="badge text-bg-danger">{{superpanel.test_directory}}</span></h4>
            {% endif %}
            {% if superpanel.panel_version %}
            <h4>version: {{ superpanel.panel_version }}</h4>
            {% else %}
            <h4>panel version: None</h4>
            {% endif %}
            {% if superpanel.custom %}
            <h4>custom: <span class="badge text-bg-success">{{superpanel.custom}}</span></h4>
            {% else %}
            <h4>custom: <span class="badge text-bg-danger">{{superpanel.custom}}</span></h4>
            {% endif %}
            <h4>created: {{ superpanel.created }}</h4>
            <h5>database id: <span class="text-danger">{{ superpanel.id }}</span></h5>
            {% else %}
            <h1>SuperPanel Does Not Exist.</h1>
            {% endif %}
        </div>
    </div>

    <div class="row my-3"></div>

    <!-- Clinical Indication SuperPanel Link -->
    <div class="row">
        <div class="col">
            <h3>Clinical Indication SuperPanel</h3>
            <p class="text-muted">all clinical indication linked to the superpanel</p>
            {% if cips %}
            <table class="table table-striped table-bordered">
                <thead class="table-success">
                    <tr>
                        <th scope="col">Database ID</th>
                        <th scope="col">Active</th>
                        <th scope="col">Clinical Indication</th>
                    </tr>
                </thead>
                <tbody>
                    {% for row in cips %}
                    <tr>
                        <td><a href="{% url 'clinical_indication_superpanel' row.id %}">{{row.id}}</a></td>
                        <td>{{row.current}}</td>
                        <td><a
                                href="{% url 'clinical_indication' row.clinical_indication_id %}">{{row.clinical_indication_id__name}}</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <div class="alert alert-info" role="alert">
                Nothing to show here!
            </div>
            {% endif %}
        </div>
    </div>

    <div class="row my-3"></div>

    <!-- Child Panels -->
    <div class="row">
        <div class="col">
            <h3>Child Panels</h3>
            <p class="text-muted">all child panels under the superpanel</p>
            {% if child_panels %}
            <table class="table table-striped table-bordered pt-2" id="childPanelsTable">
                <thead class="table-success">
                    <tr>
                        <th scope="col">PanelApp ID</th>
                        <th scope="col">Panel Name</th>
                        <th scope="col">Panel Version</th>
                    </tr>
                </thead>
                <tbody>
                    {% for row in child_panels %}
                    <tr>
                        <td>{{row.panel_id__external_id}}</td>
                        <td><a href="{% url 'panel' row.panel_id %}">{{row.panel_id__panel_name}}</a></td>
                        <td>{{row.panel_id__panel_version}}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <div class="alert alert-info" role="alert">
                Nothing to show here!
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}

{% block script %}
<script>
    $(document).ready(function () {
        new DataTable('#childPanelsTable');
    });
</script>
{% endblock %}