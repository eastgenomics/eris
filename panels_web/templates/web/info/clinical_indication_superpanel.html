{% extends "base.html" %}

{% block content %}
<div class="container">
    <div class="row">
        <div class="col">
            {% if cisp %}
            <h1>Clinical Indication SuperPanel: {{cisp.id}}</h1>
            <h4><span class="badge text-bg-info text-white">Clinical Indication SuperPanel</span></h4>
            <h4>Panel: <a href="{% url 'superpanel' cisp.superpanel_id %}">{{cisp.superpanel_id__panel_name}}</a></h4>
            <h4>Clinical Indication: <a
                    href="{% url 'clinical_indication' cisp.clinical_indication_id %}">{{cisp.clinical_indication_id__r_code}}
                    {{cisp.clinical_indication_id__name}}</a></h4>

            {% if cisp.current %}
            <h4>Current: <span class="badge text-bg-success">{{cisp.current}}</span></h4>
            {% else %}
            <h4>Current: <span class="badge text-bg-danger">{{cisp.current}}</span></h4>
            {% endif %}
            {% if cisp.pending %}
            <h4>Pending: <span class="badge text-bg-success">{{cisp.pending}}</span></h4>
            {% else %}
            <h4>Pending: <span class="badge text-bg-danger">{{cisp.pending}}</span></h4>
            {% endif %}
            {% else %}
            <div class="alert alert-info" role="alert">
                Clinical Indication Panel Does Not Exist!
            </div>
            {% endif %}
        </div>
    </div>

    <div class="row my-3"></div>

    <div class="row">
        <div class="col">
            <h3>Releases</h3>
            <table class="table table-striped table-bordered">
                <thead class="table-success">
                    <tr>
                        <th scope="col">Version</th>
                        <th scope="col">Source</th>
                        <th scope="col">Config Source</th>
                        <th scope="col">Date</th>
                    </tr>
                </thead>
                <tbody>
                    {% for release in releases %}
                    <tr>
                        <td>{{release.td_release_id__release}}</td>
                        <td>{{release.td_release_id__td_source}}</td>
                        <td>{{release.td_release_id__config_source}}</td>
                        <td>{{release.td_release_id__td_date}}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <div class="row">
        <div class="col">
            {% if cip %}
            <form action="{% url 'clinical_indication_panel' cip.id %}" method="POST">
                {% csrf_token %}
                {% if cip.pending %}
                <div class="alert alert-info" role="alert">
                    Clinical Indication Panel is Pending! No Action Allowed.
                </div>
                {% else %}
                {% if not cip.current %}
                <input type="text" class="form-control visually-hidden" id="exampleInput" name="action"
                    value="activate">
                <button type="submit" class="btn btn-success btn-sm">Activate</button>
                {% else %}
                <input type="text" class="form-control visually-hidden" id="exampleInput" name="action"
                    value="deactivate">
                <button type="submit" class="btn btn-danger btn-sm">Deactivate</button>
                {% endif %}
                {% endif %}
            </form>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}

{% block script %}
<script>
    $(document).ready(function () {
        new DataTable('');
    });
</script>
{% endblock %}