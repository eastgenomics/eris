{% extends "base.html" %}

{% block content %}
<div class="container-fluid mb-5 px-2">
    <div class="row">
        <div class="col">
            <h3>Clinical Indication Panels</h3>
        </div>
    </div>
    <div class="row mx-1">
        <div class="col">
            <table class="table pt-3 table-striped table-bordered" id="clinicalIndicationPanelTable">
                <thead class="table-success">
                  <tr>
                    <th>Clinical Indication</th>
                    <th>Panel</th>
                    <th class="text-nowrap">Test Directory Releases</th>
                    <th>Active</th>
                  </tr>
                </thead>
                <tbody>
                    {% for cip in cips %}
                  <tr>
                    <td><a href="{% url 'clinical_indication' cip.ci_panel_id__clinical_indication_id %}">{{ cip.ci_panel_id__clinical_indication_id__name }}</a> <br><span class="badge text-bg-info">{{ cip.ci_panel_id__clinical_indication_id__r_code }}</span> {% if cip.duplicate %}<span class="badge text-bg-warning">need review</span> {% endif %}</td>
                    {% if cip.ci_panel_id__panel_id__panel_version %}
                    <td><a href="{% url 'panel' cip.ci_panel_id__panel_id %}">{{ cip.ci_panel_id__panel_id__panel_name }}</a> <br> <span class="badge text-bg-info">{{ cip.ci_panel_id__panel_id__panel_version }}</span></td>
                    {% else %}
                    <td><a href="{% url 'panel' cip.ci_panel_id__panel_id %}">{{ cip.ci_panel_id__panel_id__panel_name }}</a> <br> <span class="badge text-bg-info">-</span></td>
                    {% endif %}
                    <td>
                      {{ cip.td_release_id__release }}<br>{{ cip.td_release_id__td_source }}<br>{{ cip.td_release_id__config_source }}
                    </td>
                    {% if cip.ci_panel_id__pending %}
                      <td><span class="badge text-bg-warning">Pending</span></td>
                    {% else %}
                      {% if cip.ci_panel_id__current %}
                        <td><span class="badge text-bg-success">Active</span></td>
                      {% else %}
                        <td><span class="badge text-bg-danger">Inactive</span></td>
                      {% endif %}
                    {% endif %}
                  </tr>
                    {% endfor %}
                </tbody>
              </table>
        </div>
    </div>
</div>
{% endblock %}

{% block script %}
<script>
  $(document).ready(function () {
    new DataTable('#clinicalIndicationPanelTable');
  });
</script>
{% endblock %}
